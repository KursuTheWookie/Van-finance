<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Savings</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --text:#f2f2f2;      /* UI-Text für Dark UIs */
    --muted:#c8c8c8;
    --line:#e6e6e6;      /* Linienfarbe Van */
    --panel:#9aa6ad;     /* Fenster */
    --ok:#2ecc71; --warn:#f1c40f; --bad:#e74c3c;
  }
  body{
    margin:0; padding:10px; background:transparent; 
    font-family:Inter,Arial,sans-serif; text-align:center; color:var(--text);
  }
  h2{margin:0 0 8px 0; font-weight:600}
  .wrap{width:560px; max-width:100%; margin:0 auto}
  svg{display:block; width:100%; height:auto}
  input{
    margin-top:8px; padding:.5rem .7rem; width:220px; text-align:right;
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.2);
    color:var(--text); border-radius:6px; outline:none; font-size:1rem;
  }
  .info{margin-top:6px; color:var(--muted); font-size:.95rem}
</style>
</head>
<body>
  <h2>Savings</h2>
  <div class="wrap">
    <!-- Pure SVG; fill width controlled by JS via the <rect id="meter"> -->
    <svg viewBox="0 0 560 260" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Van savings progress">
      <defs>
        <!-- Clip-Bereich: Kasten + Frontkeil (links) -->
        <clipPath id="vanClip">
          <!-- Cargo box -->
          <rect x="80" y="86" width="440" height="118" rx="16" ry="16"/>
          <!-- Front cab wedge (left) -->
          <path d="M80,86 L142,86 L165,118 L80,118 Z"/>
        </clipPath>
      </defs>

      <!-- Hintergrund bleibt transparent; Van selbst hat weißes Innenleben -->
      <!-- Füllbalken: sitzt UNTER den Linien, IN der Vanform -->
      <g clip-path="url(#vanClip)">
        <rect x="80" y="86" width="0" height="118" id="meter" fill="#2ecc71" />
        <!-- weißer Innenkörper für klare sichtbare Silhouette auf dunklem Notion -->
        <rect x="80" y="86" width="440" height="118" rx="16" ry="16" fill="white" opacity="0.9"/>
        <path d="M80,86 L142,86 L165,118 L80,118 Z" fill="white" opacity="0.9"/>
      </g>

      <!-- Linien/Details (Crafter L3H3, nach links ausgerichtet) -->
      <!-- Dachkante / Hochdach -->
      <path d="M80,86 h310 l16,-10 h54" fill="none" stroke="var(--line)" stroke-width="3"/>
      <!-- Cargo-Box-Outline -->
      <rect x="80" y="86" width="440" height="118" rx="16" ry="16" fill="none" stroke="var(--line)" stroke-width="3"/>
      <!-- Frontkontur (links) -->
      <path d="M80,86 L142,86 L165,118 L80,118 Z" fill="none" stroke="var(--line)" stroke-width="3"/>
      <!-- Windschutzscheibe -->
      <path d="M134,90 L108,90 L90,114 L152,114" fill="var(--panel)" stroke="var(--line)" stroke-width="2"/>
      <!-- Trittstufe / Stoßfänger -->
      <path d="M80,118 L84,130 L80,148" fill="none" stroke="var(--line)" stroke-width="3"/>

      <!-- Paneel-/Schiebetür-Andeutungen -->
      <line x1="110" y1="138" x2="380" y2="138" stroke="var(--muted)" stroke-width="1" opacity="0.45"/>
      <line x1="115" y1="162" x2="360" y2="162" stroke="var(--muted)" stroke-width="1" opacity="0.35"/>
      <!-- Heck-Türfuge -->
      <line x1="480" y1="100" x2="480" y2="190" stroke="var(--muted)" stroke-width="1" opacity="0.45"/>

      <!-- Räder -->
      <g>
        <circle cx="200" cy="204" r="24" fill="var(--line)"/>
        <circle cx="200" cy="204" r="10" fill="#888"/>
        <circle cx="420" cy="204" r="24" fill="var(--line)"/>
        <circle cx="420" cy="204" r="10" fill="#888"/>
      </g>

      <!-- Markierung „van paid“ bei 50k/60k -->
      <line id="paidTick" x1="0" y1="80" x2="0" y2="206" stroke="var(--muted)" stroke-dasharray="4 4" stroke-width="2"/>
      <text id="paidLabel" x="0" y="76" text-anchor="middle" font-size="12" fill="var(--muted)">van paid</text>
    </svg>

    <input type="number" id="savings" placeholder="Savings (€)" />
    <div class="info" id="info">0% — 0€ of 60,000€</div>
  </div>

<script>
  // ---- Config ----
  const goal   = 60000;  // Gesamtziel
  const paidAt = 50000;  // Marke "van paid" (optional)
  const bodyX  = 80, bodyW = 440; // muss mit der SVG-Geometrie matchen

  const meter = document.getElementById('meter');
  const info  = document.getElementById('info');
  const input = document.getElementById('savings');
  const paidTk= document.getElementById('paidTick');
  const paidLb= document.getElementById('paidLabel');

  function colorFor(p){
    if (p < 0.25) return '#e74c3c';
    if (p < 0.75) return '#f1c40f';
    return '#2ecc71';
  }

  function placePaidMarker(){
    const px = bodyX + bodyW * (paidAt/goal);
    paidTk.setAttribute('x1', px); paidTk.setAttribute('x2', px);
    paidLb.setAttribute('x', px);
  }
  placePaidMarker();

  function update(amount){
    const p = Math.max(0, Math.min(1, amount/goal));
    meter.setAttribute('width', bodyW * p);
    meter.setAttribute('fill', colorFor(p));
    info.textContent = `${(p*100).toFixed(1)}% — ${amount.toLocaleString()}€ of ${goal.toLocaleString()}€`;
    localStorage.setItem('van_savings', amount);
  }

  input.addEventListener('input', e => update(Number(e.target.value || 0)));

  const saved = Number(localStorage.getItem('van_savings') || 0);
  input.value = saved || '';
  update(saved);
</script>
</body>
</html>
