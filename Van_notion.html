<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Savings</title>
<style>
  :root{
    --text:#eaecef; --muted:#aeb6bc; --ok:#2ecc71; --mid:#f1c40f; --bad:#e74c3c;
  }
  body{margin:0;padding:10px;background:transparent;color:var(--text);font:15px/1.45 system-ui}
  .wrap{max-width:820px;margin:0 auto}
  h2{margin:.2rem 0 .8rem;text-align:center;font-weight:700}
  .stage{position:relative;aspect-ratio:16/5;max-width:820px;margin:0 auto}
  .van{position:absolute;inset:0;display:block;margin:0 auto;object-fit:contain;filter:drop-shadow(0 0 0 rgba(0,0,0,0))}
  /* Füllbereich: runde Box im „Seitenkasten“ des Vans (Position ggf. anpassen) */
  .tank{position:absolute;left:14%;top:34%;width:62%;height:28%;
        background:rgba(255,255,255,.08);border-radius:14px;overflow:hidden}
  .fill{height:100%;width:0;background:var(--bad);transition:width .25s ease}
  .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin:6px 2px 10px}
  .row{display:flex;gap:10px;align-items:center;justify-content:center;margin:.2rem 0 .6rem}
  input[type=number]{width:180px;padding:.5rem .6rem;border-radius:8px;border:1px solid rgba(255,255,255,.18);
    background:rgba(255,255,255,.06);color:var(--text);text-align:right}
  .hint{font-size:12px;color:var(--muted);text-align:center}
</style>

<div class="wrap">
  <h2>Savings</h2>

  <div class="stage">
    <!-- DEIN VAN-BILD: ersetze diese URL durch dein Crafter-PNG/SVG (linksgerichtet, transparenter BG ideal) -->
    <img class="van" alt="van"
         src="https://raw.githubusercontent.com/KursuTheWookie/Van-finance/main/crafter-side.png"
         onerror="this.style.display='none'">
    <div class="tank"><div class="fill" id="fill"></div></div>
  </div>

  <div class="meta"><span id="pct">0%</span><span id="amt">0€ von 60 000€</span></div>

  <div class="row">
    <label>Ersparnis (€):</label>
    <input type="number" id="num" step="100" min="0" value="0">
    <label>Ziel (€):</label>
    <input type="number" id="goal" step="500" min="1000" value="60000">
  </div>
  <div class="hint">Startwert per URL: <code>#amount=20000&goal=60000</code>. Werte werden lokal gespeichert.</div>
</div>

<script>
(function(){
  const fill = document.getElementById('fill'),
        pct  = document.getElementById('pct'),
        amt  = document.getElementById('amt'),
        num  = document.getElementById('num'),
        goal = document.getElementById('goal');

  const clamp=(x,min,max)=>Math.max(min,Math.min(max,x));
  const color=p=>p<.25?'#e74c3c':p<.75?'#f1c40f':'#2ecc71';
  const fmt  =n=>n.toLocaleString('de-DE')+'€';

  function sync(a,g){
    a = clamp(a,0,g);
    const p=a/g;
    fill.style.width = (p*100)+'%';
    fill.style.background = color(p);
    pct.textContent = (p*100).toFixed(1)+'%';
    amt.textContent = `${fmt(a)} von ${fmt(g)}`;
    num.value  = a;
    goal.value = g;
    localStorage.setItem('van_amount', a);
    localStorage.setItem('van_goal', g);
  }

  // Start: URL-Hash > localStorage > 30% des Ziels
  const hs = new URLSearchParams((location.hash||'').slice(1));
  const g0 = Number(hs.get('goal'))   || Number(localStorage.getItem('van_goal'))   || 60000;
  const a0 = Number(hs.get('amount')) || Number(localStorage.getItem('van_amount')) || Math.round(g0*0.30);
  sync(a0,g0);

  num.addEventListener('input', ()=> sync(Number(num.value||0), Number(goal.value||g0)));
  goal.addEventListener('input',()=> sync(Number(num.value||0), Number(goal.value||g0)));
})();
</script>
