<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Savings</title>
<style>
  :root{
    --bg:transparent; --card:rgba(255,255,255,.04); --bd:rgba(255,255,255,.18);
    --text:#eaecef; --muted:#aeb6bc; --good:#2ecc71; --mid:#f1c40f; --bad:#e74c3c;
  }
  body{margin:0;padding:12px;background:var(--bg);color:var(--text);font:15px/1.45 system-ui}
  .wrap{max-width:720px;margin:0 auto}
  h2{margin:.2rem 0 .8rem;font-weight:700;text-align:center}
  .card{padding:12px;border:1px solid var(--bd);border-radius:10px;background:var(--card)}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:.4rem 0}
  input[type=number]{width:160px;padding:.5rem .6rem;border:1px solid var(--bd);border-radius:8px;
    background:rgba(255,255,255,.06);color:var(--text);text-align:right}
  input[type=range]{flex:1}
  .bar{height:16px;border-radius:8px;background:rgba(255,255,255,.08);position:relative;overflow:hidden}
  .fill{height:100%;width:0;background:var(--bad)}
  .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin-top:6px}
  .img{display:block;margin:0 auto 8px;max-width:260px;opacity:.9}
  .small{font-size:12px;color:var(--muted);text-align:center;margin-top:6px}
</style>

<div class="wrap">
  <!-- Optional: Bild (ersetzbar/entfernbar) -->
  <img class="img" src="https://raw.githubusercontent.com/KursuTheWookie/Van-finance/main/crafter-side.png" alt="van" onerror="this.style.display='none'">
  <h2>Savings</h2>

  <div class="card">
    <div class="bar"><div class="fill" id="fill"></div></div>
    <div class="meta"><span id="pct">0%</span><span id="amt">0€ von 60 000€</span></div>

    <div class="row">
      <label>Ersparnis (€):</label>
      <input type="number" id="num" step="100" min="0" value="0">
      <input type="range" id="rng" min="0" max="60000" step="100">
    </div>
    <div class="row">
      <label>Ziel (€):</label>
      <input type="number" id="goal" step="500" min="1000" value="60000">
    </div>
    <div class="small">Tip: Startwert per URL setzen: <code>#amount=20000&goal=60000</code></div>
  </div>
</div>

<script>
(function(){
  const q=(s)=>document.querySelector(s);
  const fill=q('#fill'), pct=q('#pct'), amt=q('#amt'),
        num=q('#num'), rng=q('#rng'), goal=q('#goal');

  function color(p){ return p<.25?'#e74c3c':p<.75?'#f1c40f':'#2ecc71'; }
  function fmt(n){ return n.toLocaleString('de-DE')+'€'; }

  function sync(amount, g){
    const a=Math.max(0, Math.min(amount, g));
    const p=a/g; fill.style.width=(p*100)+'%'; fill.style.background=color(p);
    pct.textContent=(p*100).toFixed(1)+'%';
    amt.textContent = `${fmt(a)} von ${fmt(g)}`;
    num.value=a; rng.value=a; rng.max=g; goal.value=g;
    localStorage.setItem('van_amount', a); localStorage.setItem('van_goal', g);
  }

  // Startwerte: URL-Hash > localStorage > 30% vom Ziel
  const hash=new URLSearchParams((location.hash||'').replace('#',''));
  const g0= Number(hash.get('goal')) || Number(localStorage.getItem('van_goal')) || 60000;
  const a0= Number(hash.get('amount'))|| Number(localStorage.getItem('van_amount'))|| Math.round(g0*0.30);

  sync(a0,g0);

  num.addEventListener('input', ()=> sync(Number(num.value||0), Number(goal.value||g0)));
  rng.addEventListener('input', ()=> sync(Number(rng.value||0), Number(goal.value||g0)));
  goal.addEventListener('input',()=> sync(Number(num.value||0), Number(goal.value||g0)));
})();
</script>
